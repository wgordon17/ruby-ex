#!/bin/bash -e
# The assemble script builds the application artifacts from source and
# places them into appropriate directories inside the image.

echo "---> Updating bundler gem..."
gem install bundler -v "~>1.0" \
  --no-user-install  \ # disable user install in order to specify an install path
  --install-dir /opt/app-root/gems  \ # install in a user-owned directory
  --bindir /opt/app-root/bin  # specify the directory to use for the binary files

# Update PATH to read from the above directory for binaries first
export PATH=/opt/app-root/bin:$PATH

pwd
bundle version
ls -la

# Execute the default S2I script
source ${STI_SCRIPTS_PATH}/assemble
